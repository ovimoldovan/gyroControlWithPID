%% sample data

output = [
    0.00
0.00
0.00
0.00
-6.53
-6.53
-6.53
-105.10
-105.10
-105.10
-206.16
-206.16
-206.16
-272.86
-272.86
-272.86
-320.69
-320.69
-320.69
-321.99
-321.99
-321.99
-345.62
-345.62
-345.62
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-383.57
-383.57
-383.57
-363.81
-363.81
-363.81
-357.12
-357.12
-357.12
-383.57
-383.57
-383.57
-357.12
-357.12
-357.12
-369.87
-369.87
-369.87
-383.57
-383.57
-383.57
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-357.12
-357.12
-357.12
-383.57
-383.57
-383.57
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-383.57
-383.57
-383.57
-357.12
-357.12
-357.12
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-383.57
-383.57
-383.57
-369.87
-369.87
-369.87
-357.12
-357.12
-357.12
-383.57
-383.57
-383.57
-357.12
-357.12
-357.12
-369.87
-369.87
-369.87
-383.57
-383.57
-383.57
-357.12
-357.12
-357.12
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-383.57
-383.57
-383.57
-363.81
-363.81
-363.81
-357.12
-357.12
-357.12
-383.57
-383.57
-383.57
-357.12
-357.12
-357.12
-369.87
-369.87
-369.87
-383.57
-383.57
-383.57
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-351.26
-351.26
-351.26
-383.57
-383.57
-383.57
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-351.26
-351.26
-351.26
-383.57
-383.57
-383.57
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-383.57
-383.57
-383.57
-351.26
-351.26
-351.26
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-369.87
-363.81
-363.81
-363.81
-383.57
-383.57
-383.57
-369.87
-369.87
-369.87
-351.26
-351.26
-351.26
-383.57
-383.57
-383.57
-357.12
-357.12
-357.12
-363.81
-363.81
-363.81
-383.57
-383.57
-383.57
-369.87
-369.87
-369.87
-363.81
-363.81
-363.81
-369.87
-369.87
-369.87
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-369.87
-369.87
-369.87
-345.41
-345.41
-345.41
-377.28
-377.28
-377.28
-357.12
-357.12
-357.12
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-369.87
-369.87
-369.87
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-357.12
-357.12
-357.12
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-369.87
-369.87
-369.87
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-345.41
-345.41
-345.41
-369.87
-369.87
-369.87
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-369.87
-369.87
-369.87
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-369.87
-369.87
-369.87
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-357.12
-357.12
-357.12
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-369.87
-369.87
-369.87
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-345.41
-345.41
-345.41
-377.28
-377.28
-377.28
-357.75
-357.75
-357.75
-351.26
-351.26
-351.26
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-357.75
-357.75
-357.75
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-351.26
-351.26
-351.26
-371.00
-371.00
-371.00
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-351.26
-351.26
-351.26
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-369.87
-369.87
-369.87
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-345.41
-345.41
-345.41
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-345.41
-345.41
-345.41
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-371.00
-371.00
-371.00
-357.75
-357.75
-357.75
-345.41
-345.41
-345.41
-371.00
-371.00
-371.00
-345.41
-345.41
-345.41
-357.75
-357.75
-357.75
-371.00
-371.00
-371.00
-345.41
-345.41
-345.41
-351.68
-351.68
-351.68
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-357.75
-371.00
-371.00
-371.00
-357.75
-357.75
-357.75
-345.41
-345.41
-345.41
-377.28
-377.28
-377.28
-345.41
-345.41
-345.41
-357.75
-357.75
-357.75
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-351.26
-351.26
-351.26
-377.28
-377.28
-377.28
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-345.41
-345.41
-345.41
-377.28
-377.28
-377.28
-351.26
-351.26
-351.26
-357.75
-357.75
-357.75
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-377.28
-377.28
-377.28
-357.75
-357.75
-357.75
-351.26
-351.26
-351.26
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-377.28
-377.28
-377.28
-345.41
-345.41
-345.41
-363.81
-363.81
-363.81
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-351.26
-351.26
-351.26
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-351.26
-351.26
-351.26
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-345.41
-345.41
-345.41
-377.28
-377.28
-377.28
-345.41
-345.41
-345.41
-363.81
-363.81
-363.81
-371.00
-371.00
-371.00
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-363.81
-363.81
-363.81
-357.75
-357.75
-357.75
-351.26
-351.26
-351.26
-371.00
-371.00
-371.00
-357.75
-357.75
-357.75
-345.41
-345.41
-345.41
-377.28
-377.28
-377.28
-327.85
-327.85
-327.85
-315.30
-315.30
-315.30
-301.83
-301.83
-301.83
-266.79
-266.79
-266.79
-236.48
-236.48
-236.48
-218.29
-218.29
-218.29
-194.03
-194.03
-194.03
-175.84
-175.84
-175.84
-151.59
-151.59
-151.59
-133.40
-133.40
-133.40
-119.47
-119.47
-119.47
-90.95
-90.95
-90.95
-71.83
-71.83
-71.83
-63.67
-63.67
-63.67
-47.54
-47.54
-47.54
-42.44
-42.44
-42.44
-20.37
-20.37
-20.37
-6.53
-6.53
-6.53
0.00
0.00
0.00
0.00
]' * (-1);

%% transfer function

time = 0:10/length(output):10-10/length(output);

plot(time,output)
input = ones(1, length(output)) * 255;
input(1:4)=0;
input(1100:length(input)) = 0;

T2 = time(13); %0.63 * yss = 229
T1 = time(5);
T = T2 - T1;
yss = mean(output(300:500));
y0 = 0;
uss = 255;
u0 = 0;
K = yss/uss;
H = tf([K], [T, 1])

figure()
Hz = c2d(H, 0.001, 'zoh')
Ho = feedback(Hz,1)
step(Ho)

Hc = tf([0.06914 1], [0.0137 0.1856 0]);
Hcz = c2d(Hc,0.001, 'tustin')
Ho = feedback(Hcz*Hz, 1);
step(Ho)